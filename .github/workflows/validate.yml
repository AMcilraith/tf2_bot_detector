name: Validate JSONs

on: [push, pull_request]

jobs:
  validate-json-files:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2

      - name: Install validator
        run: go get github.com/neilpa/yajsv

      - name: Validate playerlist
        run: yajsv -s schemas/v3/playerlist.schema.json staging/cfg/playerlist.official.json

      - name: Validate rules
        run: yajsv -s schemas/v3/rules.schema.json staging/cfg/rules.official.json

      - name: Validate rules
        uses: docker://orrosenblatt/validate-json-action:latest
        env:
          INPUT_SCHEMA: /schemas/v3/rules.schema.json
          INPUT_JSONS: /staging/cfg/rules.official.json
